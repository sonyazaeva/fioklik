# нужно дополнительно импортнуть
import sys
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from datetime import datetime

# я ещё отдельно зафиксировала сам токен
TOKEN = "8165202855:AAEEzi3GheY3K26A4YEQ1Wpk-TQQDfBB_Bs"

# эта функция запускается в определенное время и присылает промпты по айди
async def send_prompt(bot: Bot, user_id: int):
    f = open('notes.txt', encoding='utf-8')
    number = random.randrange(10) # поменять, когда будет больше промптов
    note = f.readlines()
    await bot.send_message(user_id, text="вот тебе идея для заметки:\n\n" + note[number])

# расписание активируется при запуске бота, но это плохо(?), потому что оно должно запускаться после создания аккаунта и назначения времени
async def main() -> None:
    bot = Bot(TOKEN)
    scheduler = AsyncIOScheduler()
    timezone="Europe/Moscow"
    scheduler.add_job(send_prompt, trigger="cron", hour=15,minute=22,start_date=datetime.now(), kwargs={
                    "bot": bot,
                    "user_id": 1039995465, # это пока что мой ( - Мануш) айди
                },)
    scheduler.start()
    await dp.start_polling(bot)


if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO, stream=sys.stdout) # я не знаю, что это, но оно нужно.
    asyncio.run(main())
